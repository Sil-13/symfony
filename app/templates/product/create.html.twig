{# 1. Herde a estrutura HTML principal do Symfony #}
{% extends 'base.html.twig' %}

{# 2. Defina o título da página #}
{% block title %}Criar Produto{% endblock %}

{# 3. Coloque todo o seu conteúdo dentro do bloco 'body' #}
{% block body %}
<div style="width: 80%; margin: 2rem auto; font-family: sans-serif;">

    {% if success %}
        {# --- O SEU CÓDIGO DE SUCESSO --- #}
        <h1>Sucesso!</h1>
        <p>Produto criado com sucesso!</p>
        
        <div>
            {# 
              NOTA: O controller que você postou antes não passa a variável 'product'
              de volta para o Twig no caso de 'GET' (só no POST).
              Para evitar erros, vamos verificar se 'product' existe.
            #}
            {% if product is defined %}
                <p><strong>ID:</strong> {{ product.id }}</p>
                <p><strong>Nome:</strong> {{ product.name }}</p>
                <p><strong>Preço:</strong> R$ {{ product.price|number_format(2, ',', '.') }}</p>
                {# Se a descrição for opcional, ela pode ser nula #}
                <p><strong>Descrição:</strong> {{ product.description | default('N/A') }}</p>
            {% endif %}
        </div>
        
        <a href="{{ path('create_product') }}">Criar Outro Produto</a>

    {% else %}
        {# --- O SEU FORMULÁRIO --- #}
        <h1>Criar Novo Produto</h1>
        
        <form method="POST" style="display: flex; flex-direction: column; gap: 1rem;">
            <div>
                <label for="name">Nome do Produto:</label>
                <input type="text" id="name" name="name" required style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px;">
            </div>
            
            <div>
                <label for="price">Preço:</label>
                <input type="number" id="price" name="price" step="0.01" required style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px;">
            </div>

            {#
              IMPORTANTE: O campo 'description' está faltando.
              Isso SÓ funcionará se você já tornou a 'description' opcional
              (nullable) no Product.php e rodou as migrações.
            #}

            {# 
              SE VOCÊ NÃO TORNOU A DESCRIÇÃO OPCIONAL, 
              ADICIONE ESTE BLOCO DE VOLTA:
            <div>
                <label for="description">Descrição:</label>
                <textarea id="description" name="description" required style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px;"></textarea>
            </div> 
            #}
            <div>
                <label for="description">Descrição:</label>
                <textarea id="description" name="description" required style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px;"></textarea>
            </div>
            
            <button type="submit" style="padding: 0.75rem 1.5rem; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                Salvar Produto
            </button>
        </form>
    {% endif %}

</div>
{% endblock %}